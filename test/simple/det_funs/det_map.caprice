(* TEST
  include splayable;
*)

(*
  There is not often a reason to write map this way, but it works.
  This just ensures that splayed recursive calls are deterministic.
*)
let rec map
  : (type a) --> (type b) --> (a --> b) --> list a --> list b 
  = fun a b f ls ->
  match ls with
  | [] -> []
  | hd :: tl -> f hd :: map a b f tl
  end
